<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.bayue.moe/"/>
  <updated>2019-07-19T05:44:26.136Z</updated>
  <id>http://blog.bayue.moe/</id>
  
  <author>
    <name>å…«æœˆ</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>PHP è‡ªåŠ¨åŠ è½½</title>
    <link href="http://blog.bayue.moe/2018/10/11/php-autoload/"/>
    <id>http://blog.bayue.moe/2018/10/11/php-autoload/</id>
    <published>2018-10-11T09:22:42.000Z</published>
    <updated>2019-07-19T05:44:26.136Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-è‡ªåŠ¨åŠ è½½"><a href="#1-è‡ªåŠ¨åŠ è½½" class="headerlink" title="1. è‡ªåŠ¨åŠ è½½"></a>1. è‡ªåŠ¨åŠ è½½</h2><p>phpçš„åŠ è½½æ–‡ä»¶ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸‰ç§æƒ…å†µ</p><ol><li>ç›´æ¥<code>include/require</code>ï¼Œä¸å±äºè‡ªåŠ¨åŠ è½½ï¼Œä¸€èˆ¬ç”¨äºPHP5ä»¥å‰çš„ç‰ˆæœ¬ã€‚</li><li>ä½¿ç”¨<code>__autoload()</code>ï¼ŒPHP5.0å¼•å…¥ï¼Œåœ¨PHP5.1.12ä¹‹åä¸å†æ¨èä½¿ç”¨ã€‚</li><li>ä½¿ç”¨<code>spl_auoload_register()</code>ï¼Œç°åœ¨ä½¿ç”¨æ¯”è¾ƒå¤šï¼ŒäºPHP5.1.12ä¹‹ååŠ å…¥ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼åŠ è½½æ–‡ä»¶ã€‚</li></ol><hr><h3 id="å…·ä½“å®ä¾‹"><a href="#å…·ä½“å®ä¾‹" class="headerlink" title="å…·ä½“å®ä¾‹"></a>å…·ä½“å®ä¾‹</h3><p>ç¬¬ä¸€ç§æ²¡ä»€ä¹ˆè¯´çš„ã€‚ä¸»è¦è¿˜æ˜¯çœ‹ç¬¬äºŒç§å’Œç¬¬ä¸‰ç§ã€‚</p><p>å‡è®¾åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œé¢æœ‰ä¸¤ä¸ªæ–‡ä»¶</p><p><code>Demo.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment"># coding</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>index.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__autoload</span><span class="params">($class_name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     $file = dirname(<span class="keyword">__FILE__</span>) . <span class="string">'/'</span> . $class_name;</span><br><span class="line">     <span class="keyword">if</span> (file_exist($file)) &#123;</span><br><span class="line">         <span class="keyword">include</span>($file);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">$obj = <span class="keyword">new</span> Demo();</span><br></pre></td></tr></table></figure><p><code>Demo.php</code>å’Œ<code>index.php</code>åªè¦åœ¨ä¸€ä¸ªåŒçº§ç›®å½•å†…ï¼Œphpå˜ä¼šå¾ˆæ™ºèƒ½çš„åŠ è½½<code>Demo.php</code>,ä¸éœ€è¦æ˜¾ç¤ºçš„æ“ä½œã€‚</p><p>ä½†æ˜¯è¿™é‡Œè¿˜æ˜¯å­˜åœ¨å¼Šç«¯çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªé¡¹ç›®ä¸­åªèƒ½æœ‰ä¸€ä¸ª<code>__autoload()</code>ï¼Œè¿™ä¹Ÿæ„å‘³ç€è‡ªåŠ¨åŠ è½½çš„ä»·å€¼å˜å¾—å¾ˆä½ï¼Œäºæ˜¯PHPä¾¿åœ¨PHP5.1.12ç‰ˆæœ¬ä¹‹åæ·»åŠ äº†<code>spl_autoload_register()</code>ï¼Œå®ƒæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä½¿å¾—è‡ªåŠ¨åŠ è½½æ›´åŠ çš„çµæ´»ã€‚</p><p><code>index.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_autoload</span><span class="params">($class_name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $file = dirname(<span class="keyword">__FILE__</span>) . <span class="string">'/'</span> . $class_name;</span><br><span class="line">    <span class="keyword">if</span> (file_exist($file)) &#123;</span><br><span class="line">        <span class="keyword">include</span>($file);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">spl_autoload_register(<span class="string">'my_autoload'</span>);</span><br><span class="line">$obj = <span class="keyword">new</span> Demo();</span><br></pre></td></tr></table></figure><p>ä¹‹å‰çš„<code>Demo.php</code>ä¸åšä¿®æ”¹ï¼Œå°†<code>index.php</code>å¦‚æ­¤ä¿®æ”¹ï¼Œä¾¿å¯ä»¥åŒæ ·çš„åŠŸèƒ½ã€‚</p><p>å…³äº<code>spl_autoload_register()</code>æ›´å¤šçš„å†…å®¹å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p><p><a href="http://php.net/manual/zh/function.spl-autoload-register.php" target="_blank" rel="noopener">http://php.net/manual/zh/function.spl-autoload-register.php</a></p><h2 id="2-Composer"><a href="#2-Composer" class="headerlink" title="2. Composer"></a>2. Composer</h2><p>åœ¨5.3ä¹‹åï¼ŒComposerå¤§è¡Œå…¶é“ï¼Œå·ç§°PHPæœªæ¥çš„å¸Œæœ›ã€‚ã€‚ã€‚</p><p>ä½¿ç”¨Composerè‡ªåŠ¨åŠ è½½æ—¶åªè¦å¼•å…¥ä¸€ä¸ªè‡ªåŠ¨åŠ è½½æ–‡ä»¶å°±å¯ä»¥äº†ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include_once</span>(<span class="string">'vendor/autoload.php'</span>);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆComposerçš„è‡ªåŠ¨åŠ è½½æ—¶æ€ä¹ˆå®ç°çš„å‘¢ï¼Œå…¶å®ä¹Ÿæ˜¯ä¾é <code>spl_autoload_register()</code>ã€‚</p><p>é¦–å…ˆComposerå­˜å‚¨ä¸‰å¯¹æ•°ç»„</p><blockquote><p>class=&gt;dir<br>namespace=&gt;array(dir, dir, dir)<br>PSR4=&gt;array(dir, dir1, dir2â€¦)</p></blockquote><p>ç„¶ååœ¨autoload.phpï¼Œ å­˜åœ¨ä¸€ä¸ªloaderï¼Œå¯ä»¥è§¦å‘spl_autoload_register,<br>ä¸€æ—¦è§¦å‘ï¼ŒComposerä¼šå¯¹è§¦å‘çš„ç±»å‹è¿›è¡Œåˆ†æï¼Œé€‰æ‹©åˆé€‚çš„æ•°ç»„ï¼Œå°†çœŸå®çš„åœ°å€æå–å‡ºæ¥ï¼Œç„¶å<code>include</code>ï¼ŒåŸç†è¿˜æ˜¯å¾ˆç®€å•ï¼Œæ¨èå¤§å®¶è‡ªè¡ŒæŸ¥çœ‹ä¸€ä¸‹Composerçš„è‡ªåŠ¨åŠ è½½çš„ä»£ç ã€‚</p><p>å…³äºcomposerçš„ä¸€ä¸ªTips</p><blockquote><p>åœ¨ä¸Šçº¿ä»£ç æ—¶å¯ä»¥ä½¿ç”¨<code>composer dump-autoload -o</code> è½¬æ¢ <code>PSR-0/4 autoloading</code> åˆ° <code>classmap</code> è·å¾—æ›´å¿«çš„è½½å…¥é€Ÿåº¦ã€‚è¿™ç‰¹åˆ«é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä½†å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥è¿è¡Œï¼Œå› æ­¤å®ƒç›®å‰ä¸æ˜¯é»˜è®¤è®¾ç½®ã€‚è‡³äºä¸ºä»€ä¹ˆï¼Œçœ‹å®Œæºä»£ç å°±æ¸…æ™°äº†ã€‚</p></blockquote><h2 id="3-ç®€å•å®ç°ä¸€ä¸ªComposerè‡ªåŠ¨åŠ è½½"><a href="#3-ç®€å•å®ç°ä¸€ä¸ªComposerè‡ªåŠ¨åŠ è½½" class="headerlink" title="3. ç®€å•å®ç°ä¸€ä¸ªComposerè‡ªåŠ¨åŠ è½½"></a>3. ç®€å•å®ç°ä¸€ä¸ªComposerè‡ªåŠ¨åŠ è½½</h2><p>ç®€å•å®ç°ClassMapçš„è‡ªåŠ¨åŠ è½½åŠŸèƒ½</p><p><code>https://github.com/bayuexiong/simple-composer/tree/master/vendor</code></p><p>ä½¿ç”¨ä»£ç å’ŒComposerä¸€æ ·ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line">$obj = <span class="keyword">new</span> Demo(<span class="string">'gg'</span>);</span><br><span class="line">$obj-&gt;sayName();</span><br><span class="line"></span><br><span class="line">$obj2 = <span class="keyword">new</span> Other(<span class="string">'aa'</span>);</span><br><span class="line">$obj2-&gt;sayName();</span><br></pre></td></tr></table></figure><h2 id="4-å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŠ è½½æœºåˆ¶"><a href="#4-å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŠ è½½æœºåˆ¶" class="headerlink" title="4. å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŠ è½½æœºåˆ¶"></a>4. å¦‚ä½•é€‰æ‹©è‡ªåŠ¨åŠ è½½æœºåˆ¶</h2><ol><li>åœ¨ç¨‹åºä¸€å¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œä½¿ç”¨æ•°ç»„ï¼Œå°†é¡¹ç›®å†…æ‰€æœ‰çš„æ–‡ä»¶è®°å½•ä¸‹æ¥ï¼Œå®ç°è‡ªåŠ¨åŠ è½½(å¦‚æœä½¿ç”¨cacheï¼Œåº”è¯¥è¿˜holdçš„ä½)ï¼Œ<code>symfony</code>ä½¿ç”¨è¿™ç§å½¢å¼ï¼Œä»£ç å¦‚ä¸‹ã€‚</li></ol><p><code>https://github.com/symfony/class-loader/blob/master/ClassMapGenerator.php</code></p><ol start="2"><li><p>classåå’Œè·¯å¾„å¯¹åº”ï¼Œä¾¿äºæŸ¥æ‰¾ï¼Œä½†æ˜¯è¿™æ ·ç¼ºä¹çµæ´»æ€§ï¼Œæ¡†æ¶çš„ä¾µå…¥æ€§å¤ªå¼ºäº†ï¼Œä»£ç å¾ˆå—æ¡†æ¶çš„é™åˆ¶ï¼ŒåƒThinkPHPï¼ŒCIå°±æ˜¯ä½¿ç”¨è¿™ç§å½¢å¼ã€‚</p></li><li><p>ç»„åˆä½¿ç”¨ï¼ŒåƒLaravelå°±æ˜¯ä½¿ç”¨PSR4å’Œsymfonyçš„classLoaderã€‚</p></li></ol><hr><p>ææ–™å‚è€ƒ:</p><ol><li><a href="http://php.net/manual/zh/function.spl-autoload-register.php" target="_blank" rel="noopener">spl_autoload_register</a></li><li><a href="http://php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__atuoload</a></li><li><a href="http://php.net/manual/zh/language.namespaces.php" target="_blank" rel="noopener">å‘½åç©ºé—´</a>ï¼Œå‘½åç©ºé—´æä¾›äº†ä¸€ç§çµæ´»çš„æ•ˆç‡æ›´é«˜çš„è¾…åŠ©è‡ªåŠ¨åŠ è½½çš„æ–¹æ³•ã€‚</li><li><a href="https://segmentfault.com/a/1190000002521658" target="_blank" rel="noopener">PSR4</a> è§„èŒƒå‘½åç©ºé—´çš„å®šä¹‰ï¼Œæ˜¯æœ€è¿‘æ¯”è¾ƒæµè¡Œçš„å‘½åç©ºé—´è§„èŒƒã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-è‡ªåŠ¨åŠ è½½&quot;&gt;&lt;a href=&quot;#1-è‡ªåŠ¨åŠ è½½&quot; class=&quot;headerlink&quot; title=&quot;1. è‡ªåŠ¨åŠ è½½&quot;&gt;&lt;/a&gt;1. è‡ªåŠ¨åŠ è½½&lt;/h2&gt;&lt;p&gt;phpçš„åŠ è½½æ–‡ä»¶ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸‰ç§æƒ…å†µ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›´æ¥&lt;code&gt;include/requi
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PHP å›¾ç‰‡ä¸Šä¼ å…³äºexif</title>
    <link href="http://blog.bayue.moe/2018/09/13/php-image-exif/"/>
    <id>http://blog.bayue.moe/2018/09/13/php-image-exif/</id>
    <published>2018-09-12T17:39:12.000Z</published>
    <updated>2019-07-19T05:45:09.734Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è·å–å›¾ç‰‡çš„exif"><a href="#è·å–å›¾ç‰‡çš„exif" class="headerlink" title="è·å–å›¾ç‰‡çš„exif"></a>è·å–å›¾ç‰‡çš„exif</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$exif = exif_read_data($path, <span class="string">'IFD0'</span>);</span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡é¢ å€’"><a href="#å›¾ç‰‡é¢ å€’" class="headerlink" title="å›¾ç‰‡é¢ å€’"></a>å›¾ç‰‡é¢ å€’</h2><p>ç”¨æ‰‹æœºæ‹æ‘„æ—¶æœ‰å¯èƒ½ä¼šå¯¼è‡´å›¾åƒæ—‹è½¬ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ ¹æ®exifé‡Œçš„å€¼ï¼Œè¿›è¡Œå›¾ç‰‡æ—‹è½¬</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œä½¿ç”¨intervention/imageæ“ä½œå›¾ç‰‡</span></span><br><span class="line">$img = Image::make($file_path);</span><br><span class="line">$exif = $img-&gt;exif();</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (<span class="keyword">isset</span>($exif[<span class="string">'Orientation'</span>]) &amp;&amp; $exif[<span class="string">'Orientation'</span>]) &#123;</span><br><span class="line">        <span class="keyword">switch</span> ($exif[<span class="string">'Orientation'</span>]) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                $img-&gt;rotate(<span class="number">180</span>)-&gt;save();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                $img-&gt;rotate(<span class="number">-90</span>)-&gt;save(); <span class="comment">// é€†æ—¶é’ˆè½¬90åº¦</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                $img-&gt;rotate(<span class="number">90</span>)-&gt;save(); <span class="comment">// é¡ºæ—¶é’ˆè½¬90åº¦</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ä½¿ç”¨<code>intervention/image</code>è¿›è¡Œå›¾ç‰‡å­˜å‚¨çš„æ—¶å€™ï¼Œå‡ºç°Orientationè¢«ç½®ä¸º0(unknow)çš„æƒ…å†µï¼Œå¯ä»¥å…ˆç”¨<code>file_put_contents</code>æ¥å­˜å‚¨å›¾ç‰‡ï¼Œå†ä½¿ç”¨<code>intervention/image</code>è¿›è¡Œå›¾ç‰‡ç¼–è¾‘</p></blockquote><h2 id="è§†é¢‘ç¼©ç•¥å›¾é¢ å€’"><a href="#è§†é¢‘ç¼©ç•¥å›¾é¢ å€’" class="headerlink" title="è§†é¢‘ç¼©ç•¥å›¾é¢ å€’"></a>è§†é¢‘ç¼©ç•¥å›¾é¢ å€’</h2><p>é¡ºä¾¿ä¹Ÿæä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªå’Œå›¾ç‰‡é¢ å€’æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ‰‹æœºåœ¨ç«–å±æ‹æ‘„çš„æ—¶å€™å®é™…ä¸Šæ˜¯ç”¨äº†ä¸€ä¸ªå‚æ•°æ—‹è½¬äº†è§†é¢‘</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$out = [];</span><br><span class="line"><span class="comment">// è¿™é‡Œçš„2&gt;&amp;1ä¸å¯ä»¥ç¼ºå°‘ï¼Œä¸ç„¶æ˜¯ç›´æ¥è¾“å‡ºï¼Œè€Œä¸æ˜¯èµ‹å€¼åˆ°out</span></span><br><span class="line">exec(<span class="string">"ffmpeg -i &#123;$file&#125; 2&gt;&amp;1"</span>, $out);</span><br><span class="line">$ret = implode(<span class="string">''</span>, $out);</span><br><span class="line"><span class="comment">// åˆ¤æ–­rotation æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> (strpos($ret, <span class="string">'rotation of -90.00 degrees'</span>) !== <span class="keyword">false</span>) &#123;</span><br><span class="line">    exec(<span class="string">"ffmpeg -i &#123;$file&#125; -y -t 0.001 -vf \"transpose=1\"  &#123;$cover&#125;"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    exec(<span class="string">"ffmpeg -i &#123;$file&#125; -y  -t 0.001 &#123;$cover&#125;"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;è·å–å›¾ç‰‡çš„exif&quot;&gt;&lt;a href=&quot;#è·å–å›¾ç‰‡çš„exif&quot; class=&quot;headerlink&quot; title=&quot;è·å–å›¾ç‰‡çš„exif&quot;&gt;&lt;/a&gt;è·å–å›¾ç‰‡çš„exif&lt;/h2&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PHP é—­åŒ…</title>
    <link href="http://blog.bayue.moe/2018/09/13/php-clourse/"/>
    <id>http://blog.bayue.moe/2018/09/13/php-clourse/</id>
    <published>2018-09-12T16:49:00.000Z</published>
    <updated>2018-09-27T06:25:42.552Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—­åŒ…çš„ä»‹ç»"><a href="#é—­åŒ…çš„ä»‹ç»" class="headerlink" title="é—­åŒ…çš„ä»‹ç»"></a>é—­åŒ…çš„ä»‹ç»</h1><p>é—­åŒ…æ˜¯è¯æ³•ä½œç”¨åŸŸçš„ä½“ç°ï¼Œä¸€èˆ¬ç¼–ç¨‹è¯­è¨€æœ‰è¿™äº›ç‰¹æ€§</p><ol><li>å‡½æ•°æ˜¯ä¸€é˜¶å€¼ï¼ˆFirst-class valueï¼‰ï¼Œå³å‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼æˆ–å‚æ•°ï¼Œè¿˜å¯ä»¥ä½œä¸ºä¸€ä¸ªå˜é‡çš„å€¼ã€‚</li><li>å‡½æ•°å¯ä»¥åµŒå¥—å®šä¹‰ï¼Œå³åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªå‡½æ•°ã€‚</li></ol><p>ä¸‰ä¸ªå…³é”®ç‚¹</p><ol><li>å‡½æ•°</li><li>è‡ªç”±å˜é‡</li><li>ä½œç”¨åŸŸ</li></ol><h2 id="è‡ªç”±å˜é‡"><a href="#è‡ªç”±å˜é‡" class="headerlink" title="è‡ªç”±å˜é‡"></a>è‡ªç”±å˜é‡</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œå‡½æ•°bå› ä¸ºæ•è·äº†å¤–éƒ¨ä½œç”¨åŸŸï¼ˆç¯å¢ƒï¼‰ä¸­çš„å˜é‡aï¼Œå› æ­¤å½¢æˆäº†é—­åŒ…ã€‚ è€Œç”±äºå˜é‡aå¹¶ä¸å±äºå‡½æ•°bï¼Œæ‰€ä»¥åœ¨æ¦‚å¿µé‡Œè¢«ç§°ä¹‹ä¸ºã€Œè‡ªç”±å˜é‡ã€ã€‚</p><p>æ³¨æ„ç‚¹ï¼š</p><ol><li>åœ¨ä¸€äº›è¯­è¨€é‡Œï¼Œã€Œæ•è·ã€è¿™ä¸€è¡Œä¸ºè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šé—­åŒ…åªä¼šæ•è·è‡ªç”±å˜é‡çš„å¼•ç”¨ã€‚</li><li>åœ¨PHPä¸­ï¼Œéœ€è¦ä½¿ç”¨<code>use</code>å…³é”®è¯æ˜¾ç¤ºè°ƒç”¨è‡ªç”±å˜é‡</li></ol><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>å¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„ã€Œè‡ªç”±å˜é‡ã€ï¼Œå†…éƒ¨å˜é‡ä¸èƒ½è¢«è®¿é—®ï¼Œå½¢æˆä¸€ä¸ªç›¸å¯¹å®‰å…¨çš„è®¿é—®ç¯å¢ƒ</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>è®°ä½å®šä¹‰å½“æ—¶çš„å¤–éƒ¨ç¯å¢ƒ</li><li>å°é—­å¤–éƒ¨ç¯å¢ƒ</li><li>å»¶è¿Ÿæ‰§è¡Œ</li></ol><h1 id="æ™®é€šå‡½æ•°å’Œé—­åŒ…å‡½æ•°"><a href="#æ™®é€šå‡½æ•°å’Œé—­åŒ…å‡½æ•°" class="headerlink" title="æ™®é€šå‡½æ•°å’Œé—­åŒ…å‡½æ•°"></a>æ™®é€šå‡½æ•°å’Œé—­åŒ…å‡½æ•°</h1><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$func = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$func();</span><br><span class="line"></span><br><span class="line">$a = <span class="string">'1'</span>;</span><br><span class="line">$func = <span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($a)</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$func();</span><br></pre></td></tr></table></figure><h2 id="ä½œç”¨åŸŸ-1"><a href="#ä½œç”¨åŸŸ-1" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><ol><li>é—­åŒ…æ‹¥æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼ŒåŸºæœ¬ç­‰åŒæ™®é€šå‡½æ•°</li><li>åœ¨æ–¹æ³•ä¸­ä½¿ç”¨æ—¶ï¼Œç­‰åŒäºå®ä¾‹çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨$thisï¼ˆ&gt;=5.4ï¼‰</li></ol><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><h3 id="this-çš„ä½¿ç”¨"><a href="#this-çš„ä½¿ç”¨" class="headerlink" title="$this çš„ä½¿ç”¨"></a>$this çš„ä½¿ç”¨</h3><p>åœ¨ä¸€æ¬¡å¼€å‘ä¸­é‡åˆ°å…³äºé—­åŒ…çš„ä¸€ä¸ªé—®é¢˜</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $data = <span class="keyword">$this</span>-&gt;isCache(<span class="string">'name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;sayHello();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Hello, World'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $callback</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isCache</span><span class="params">($name, $callback)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $callback();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘å¸Œæœ›åœ¨ä¸€ä¸ªé—­åŒ…ä¸­è°ƒç”¨è¿™ä¸ªç±»çš„ä¸€ä¸ªå—ä¿æŠ¤çš„æ–¹æ³•ï¼ˆè¿™é‡Œå‡è®¾æ˜¯sayHelloï¼‰,ç»“æœåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œç›´æ¥å‡ºç°äº†è¯­æ³•çº§åˆ«çš„æŠ¥é”™ã€‚</p><p>æŸ¥äº†ä¸€äº›èµ„æ–™å‘ç°äº†é—®é¢˜</p><ol><li>5.3 ç‰ˆæœ¬ä¸èƒ½ç›´æ¥åœ¨é—­åŒ…ä¸­ä½¿ç”¨$this</li></ol><p>PHPçš„bugï¼Œåœ¨5.4ä¸­å¾—ä»¥ä¿®å¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$that = <span class="keyword">$this</span>;</span><br><span class="line">data = <span class="keyword">$this</span>-&gt;isCache(<span class="string">'name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($that)</span> </span>&#123;</span><br><span class="line">    $that-&gt;sayHello(); <span class="comment">// è¿™é‡Œåªèƒ½æ˜¯public</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>çœ‹ä¼¼è¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼Œä¸è¿‡åœ¨stackoverflowä¸Šä¸€ä½çƒ­å¿ƒäººå£«çš„æé†’ä¸­ï¼Œè¿™æ ·æ˜¯ä¼šå‡ºç°ä¸€äº›é—®é¢˜çš„ï¼Œå› ä¸ºè¿™æ ·ä¼ é€’$this, æ˜¯<strong>èµ‹å€¼ä¼ é€’</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨é—­åŒ…ä¸­è°ƒç”¨æ–¹æ³•å¯¼è‡´å®ä¾‹å±æ€§çš„å˜åŒ–ä¸ä¼šååº”åˆ°é—­åŒ…å¤–é¢ï¼Œè¿™æ ·åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œä¼šå¯¼è‡´é—­åŒ…å†…å¤–å±æ€§ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¿™é‡Œæœ€å¥½ä½¿ç”¨<strong>å¼•ç”¨ä¼ é€’</strong>ï¼Œ<strong>é™¤éä½ çŸ¥é“ä½ åœ¨å¹²ä»€ä¹ˆï¼</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$that = <span class="keyword">$this</span>;</span><br><span class="line">data = <span class="keyword">$this</span>-&gt;isCache(<span class="string">'name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">(&amp;$that)</span> </span>&#123;</span><br><span class="line">    $that-&gt;sayHello(); <span class="comment">// è¿™é‡Œåªèƒ½æ˜¯public</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨5.4ç‰ˆæœ¬ä¸‹ï¼Œä¸ä½†å¯ä»¥ç›´æ¥ä½¿ç”¨$thisï¼Œè€Œä¸”ä½œç”¨åŸŸç­‰åŒäºå®ä¾‹ä¸­çš„æ–¹æ³•</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$data = <span class="keyword">$this</span>-&gt;isCache(<span class="string">'name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    $that-&gt;sayHello(); <span class="comment">// è¿™é‡Œå¯ä»¥æ˜¯ä»»æ„é™åˆ¶ç¬¦</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Closureç±»"><a href="#Closureç±»" class="headerlink" title="Closureç±»"></a>Closureç±»</h2><ul><li><a href="https://php.net/manual/en/closure.construct.php" target="_blank" rel="noopener">Closure::__construct</a> â€” Constructor that disallows instantiation</li><li><a href="https://php.net/manual/en/closure.bind.php" target="_blank" rel="noopener">Closure::bind</a> â€” å¤åˆ¶ä¸€ä¸ªé—­åŒ…ï¼Œç»‘å®šæŒ‡å®šçš„$thiså¯¹è±¡å’Œç±»ä½œç”¨åŸŸã€‚</li><li><a href="https://php.net/manual/en/closure.bindto.php" target="_blank" rel="noopener">Closure::bindTo</a> â€” å¤åˆ¶å½“å‰é—­åŒ…å¯¹è±¡ï¼Œç»‘å®šæŒ‡å®šçš„$thiså¯¹è±¡å’Œç±»ä½œç”¨åŸŸã€‚</li><li><a href="https://php.net/manual/en/closure.call.php" target="_blank" rel="noopener">Closure::call</a> â€” ç»‘å®šæŒ‡å®šçš„$thiså¯¹è±¡å’Œç±»ä½œç”¨åŸŸå¹¶æ‰§è¡Œ</li><li><a href="https://php.net/manual/en/closure.fromcallable.php" target="_blank" rel="noopener">Closure::fromCallable</a> â€” å°†ä¸€ä¸ªå¯æ‰§è¡Œå‡½æ•°è½¬æ¢ä¸ºé—­åŒ…å‡½æ•°</li></ul><h3 id="bindå’ŒbindToçš„åŒºåˆ«"><a href="#bindå’ŒbindToçš„åŒºåˆ«" class="headerlink" title="bindå’ŒbindToçš„åŒºåˆ«"></a>bindå’ŒbindToçš„åŒºåˆ«</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bindï¼Œç›¸å½“æŠŠä¸€ä¸ªç±»çš„åŠ ä¸ŠåŠ ä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å°†è¯¥æ–¹æ³•è½¬æ¢æˆé—­åŒ…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> $sfoo = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> $ifoo = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">$cl1 = <span class="keyword">static</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A::$sfoo;</span><br><span class="line">&#125;;</span><br><span class="line">$cl2 = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;ifoo;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$bcl1 = Closure::bind($cl1, <span class="keyword">null</span>, <span class="string">'A'</span>);</span><br><span class="line">$bcl2 = Closure::bind($cl2, <span class="keyword">new</span> A(), <span class="string">'A'</span>);</span><br><span class="line"><span class="keyword">echo</span> $bcl1(), <span class="string">"\n"</span>; <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">echo</span> $bcl2(), <span class="string">"\n"</span>;<span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bindTo,æ”¹å˜æŒ‡å®šçš„$thiså¯¹è±¡å’Œç±»ä½œç”¨åŸŸ</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;val = $val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getClosure</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//returns closure bound to this object and scope</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;val; &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ob1 = <span class="keyword">new</span> A(<span class="number">1</span>);</span><br><span class="line">$ob2 = <span class="keyword">new</span> A(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">$cl = $ob1-&gt;getClosure();</span><br><span class="line"><span class="keyword">echo</span> $cl(), <span class="string">"\n"</span>;</span><br><span class="line">$cl = $cl-&gt;bindTo($ob2);</span><br><span class="line"><span class="keyword">echo</span> $cl(), <span class="string">"\n"</span>;</span><br></pre></td></tr></table></figure><p>è™½ç„¶ä¸¤è€…çœ‹ä¸Šå»åƒï¼Œå®é™…ä¸Šä¸æ˜¯ä¸€å›äº‹ğŸ˜“ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;é—­åŒ…çš„ä»‹ç»&quot;&gt;&lt;a href=&quot;#é—­åŒ…çš„ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;é—­åŒ…çš„ä»‹ç»&quot;&gt;&lt;/a&gt;é—­åŒ…çš„ä»‹ç»&lt;/h1&gt;&lt;p&gt;é—­åŒ…æ˜¯è¯æ³•ä½œç”¨åŸŸçš„ä½“ç°ï¼Œä¸€èˆ¬ç¼–ç¨‹è¯­è¨€æœ‰è¿™äº›ç‰¹æ€§&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‡½æ•°æ˜¯ä¸€é˜¶å€¼ï¼ˆFirst-class va
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PHP å‘½åç©ºé—´</title>
    <link href="http://blog.bayue.moe/2018/09/13/namespace/"/>
    <id>http://blog.bayue.moe/2018/09/13/namespace/</id>
    <published>2018-09-12T16:42:48.000Z</published>
    <updated>2018-09-27T06:17:40.398Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´"></a>1. ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´</h2><ol><li>ç”¨æˆ·ç¼–å†™çš„ä»£ç ä¸PHPå†…éƒ¨çš„ç±»/å‡½æ•°/å¸¸é‡æˆ–ç¬¬ä¸‰æ–¹ç±»/å‡½æ•°/å¸¸é‡ä¹‹é—´çš„åå­—å†²çªã€‚</li><li>ä¸ºå¾ˆé•¿çš„æ ‡è¯†ç¬¦åç§°(é€šå¸¸æ˜¯ä¸ºäº†ç¼“è§£ç¬¬ä¸€ç±»é—®é¢˜è€Œå®šä¹‰çš„)åˆ›å»ºä¸€ä¸ªåˆ«åï¼ˆæˆ–ç®€çŸ­ï¼‰çš„åç§°ï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§ã€‚</li></ol><h2 id="2-ä»€ä¹ˆå—ä½œç”¨äºå‘½åç©ºé—´"><a href="#2-ä»€ä¹ˆå—ä½œç”¨äºå‘½åç©ºé—´" class="headerlink" title="2. ä»€ä¹ˆå—ä½œç”¨äºå‘½åç©ºé—´"></a>2. ä»€ä¹ˆå—ä½œç”¨äºå‘½åç©ºé—´</h2><ul><li>ç±»</li><li>æ¥å£</li><li>å‡½æ•°</li><li>å¸¸é‡</li></ul><h2 id="3-å®šä¹‰å‘½åç©ºé—´"><a href="#3-å®šä¹‰å‘½åç©ºé—´" class="headerlink" title="3. å®šä¹‰å‘½åç©ºé—´"></a>3. å®šä¹‰å‘½åç©ºé—´</h2><p>å‘½åç©ºé—´å¿…é¡»åœ¨æ‰€æœ‰çš„å…¶ä»–ä»£ç ä¹‹å‰ï¼Œä¸€ä¸ªä»¥å¤–ï¼šdeclareå…³é”®å­—ã€‚</p><p>è¿˜æœ‰æ³¨æ„ç‚¹æ˜¯ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å…è®¸æœ‰ç©ºè¡Œçš„</span></span><br><span class="line">    <span class="keyword">namespace</span> <span class="title">my</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œä¸èƒ½æœ‰ç©ºè¡Œï¼Œ<span class="meta">&lt;?php</span>å¿…é¡»ä½äºæ–‡ä»¶çš„ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">namespace</span> <span class="title">my</span>;</span><br></pre></td></tr></table></figure><p>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨defineçš„ä½¿ç”¨ï¼Œkeyå€¼éœ€è¦åŠ å…¥å‘½åç©ºé—´</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">namespace</span> <span class="title">my</span>;</span><br><span class="line">    define(<span class="string">'my\A'</span>,<span class="number">1</span>);</span><br><span class="line">    define(<span class="keyword">__NAMESPACE__</span> . <span class="string">'\B'</span>,<span class="number">1</span>); \\æ¨è</span><br></pre></td></tr></table></figure><h2 id="4-ä½¿ç”¨å‘½åç©ºé—´"><a href="#4-ä½¿ç”¨å‘½åç©ºé—´" class="headerlink" title="4. ä½¿ç”¨å‘½åç©ºé—´"></a>4. ä½¿ç”¨å‘½åç©ºé—´</h2><p>å‘½åç©ºé—´æœ‰ä¸‰ç§å¼•ç”¨æ–¹å¼</p><ol><li>éé™å®šåç§°</li><li>é™å®šåç§°</li><li>å®Œå…¨åç§°</li></ol><p>file1.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Foo</span>\<span class="title">Bar</span>\<span class="title">subnamespace</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FOO = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticmethod</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>file2.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Foo</span>\<span class="title">Bar</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">'file1.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FOO = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">staticmethod</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* éé™å®šåç§° */</span></span><br><span class="line">foo(); </span><br><span class="line"><span class="comment">// è§£æä¸º Foo\Bar\foo resolves to function Foo\Bar\foo</span></span><br><span class="line"></span><br><span class="line">foo::staticmethod(); </span><br><span class="line"><span class="comment">// è§£æä¸ºç±» Foo\Bar\fooçš„é™æ€æ–¹æ³•staticmethodã€‚resolves to </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>\<span class="title">Bar</span>\<span class="title">foo</span>, <span class="title">method</span> <span class="title">staticmethod</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">echo</span> <span class="title">FOO</span>; // <span class="title">resolves</span> <span class="title">to</span> <span class="title">constant</span> <span class="title">Foo</span>\<span class="title">Bar</span>\<span class="title">FOO</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">/* é™å®šåç§° */</span></span><br><span class="line">subnamespace\foo(); </span><br><span class="line"><span class="comment">// è§£æä¸ºå‡½æ•° Foo\Bar\subnamespace\foo</span></span><br><span class="line"></span><br><span class="line">subnamespace\foo::staticmethod(); </span><br><span class="line"><span class="comment">// è§£æä¸ºç±» Foo\Bar\subnamespace\foo, ä»¥åŠç±»çš„æ–¹æ³• staticmethod</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> subnamespace\FOO; <span class="comment">// è§£æä¸ºå¸¸é‡ Foo\Bar\subnamespace\FOO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®Œå…¨é™å®šåç§° */</span></span><br><span class="line">\Foo\Bar\foo(); <span class="comment">// è§£æä¸ºå‡½æ•° Foo\Bar\foo</span></span><br><span class="line"></span><br><span class="line">\Foo\Bar\foo::staticmethod(); <span class="comment">// è§£æä¸ºç±» Foo\Bar\foo, ä»¥åŠç±»çš„æ–¹æ³• staticmethod</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> \Foo\Bar\FOO; <span class="comment">// è§£æä¸ºå¸¸é‡ Foo\Bar\FOO</span></span><br><span class="line"></span><br><span class="line">$a = \strlen(<span class="string">'h1'</span>); <span class="comment">//è°ƒç”¨å…¨å±€å‡½æ•°</span></span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æˆ‘ä»¬åªä½¿ç”¨å®Œå…¨é™å®šæˆ–è€…éé™å®šçš„ä½¿ç”¨æ–¹å¼ï¼Œé™å®šåç§°ç±»ä¼¼äºPythonä¸­çš„<code>import *</code>ï¼Œå¦‚æœä½ è¦ä½¿ç”¨åŒä¸€ä¸ªåŒ…ä¸­çš„å¾ˆå¤šç±»ï¼Œåˆä¸è¡Œåœ¨æ–‡ä»¶å¼€å¤´å‡ºç°å¤§é‡çš„<code>use</code>ï¼Œå¯ä»¥ä½¿ç”¨é™å®šåç§°,ä¸è¿‡éå¸¸ä¸æ¨èï¼Œæœ€ä½³å®è·µæ˜¯ç”¨äº†ä»€ä¹ˆå°±å¼•å…¥ä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•å…¥åŒ…ã€‚</p><h2 id="4-åˆ«åå’Œå¯¼å…¥"><a href="#4-åˆ«åå’Œå¯¼å…¥" class="headerlink" title="4. åˆ«åå’Œå¯¼å…¥"></a>4. åˆ«åå’Œå¯¼å…¥</h2><p>ç‰ˆæœ¬æ”¯æŒ</p><ol><li>æ‰€æœ‰æ”¯æŒå‘½åç©ºé—´çš„ç‰ˆæœ¬éƒ½å¯ä»¥ä¸‰ç§åˆ«åå’Œå¯¼å…¥çš„æ–¹å¼ï¼šç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ã€‚</li><li>PHP5.6ä¹‹åæ”¯æŒäº†å‡½æ•°å’Œå¸¸é‡</li></ol><p>æ³¨æ„ç‚¹</p><ol><li>å¿…é¡»æ˜¯å®Œå…¨é™å®šåç§°ã€‚</li><li>å®Œå…¨é™å®šåç§°å‰çš„<code>\</code>å¯ä»¥çœç•¥ï¼Œä¹Ÿæ¨èçœç•¥ã€‚</li></ol><p>ä¾‹å­<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">com</span>\<span class="title">wy</span>\<span class="title">Hello</span>;</span><br><span class="line"><span class="comment">// use \com\wy\Hello; ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡æ„ä¹‰ä¸å¤§</span></span><br><span class="line"></span><br><span class="line">$h = <span class="keyword">new</span> Hello();</span><br></pre></td></tr></table></figure></p><h2 id="5-å…¨å±€å‘½åç©ºé—´"><a href="#5-å…¨å±€å‘½åç©ºé—´" class="headerlink" title="5. å…¨å±€å‘½åç©ºé—´"></a>5. å…¨å±€å‘½åç©ºé—´</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$foo = <span class="keyword">new</span> \Foo();</span><br></pre></td></tr></table></figure><p>â€‹    æ³¨æ„ç‚¹</p><p>â€‹    1. ç³»ç»Ÿå‡½æ•°å¯ä»¥ä¸ä½¿ç”¨å…¨å±€å‘½åç©ºé—´</p><p>â€‹    2. å¦‚æœç³»ç»Ÿå‡½æ•°è¢«å¤å†™ï¼Œé‚£ä¹ˆå°±éœ€è¦å…¨å±€å‘½åç©ºé—´</p><h2 id="6-PSR-4-Autoload-è‡ªåŠ¨åŠ è½½"><a href="#6-PSR-4-Autoload-è‡ªåŠ¨åŠ è½½" class="headerlink" title="6. PSR-4 Autoload è‡ªåŠ¨åŠ è½½"></a>6. PSR-4 Autoload è‡ªåŠ¨åŠ è½½</h2><p><a href="https://segmentfault.com/a/1190000002521658" target="_blank" rel="noopener">PSR-4è§„èŒƒ</a></p><p>ä¾‹å­</p><table><thead><tr><th style="text-align:left">å®Œæ•´ç±»å</th><th style="text-align:left">å‘½åç©ºé—´å‰ç¼€</th><th style="text-align:left">æ–‡ä»¶åŸºç›®å½•</th><th style="text-align:left">æ–‡ä»¶è·¯å¾„</th></tr></thead><tbody><tr><td style="text-align:left">\Symfony\Core\Request</td><td style="text-align:left">Symfony\Core</td><td style="text-align:left">./vendor/Symfony/Core/</td><td style="text-align:left">./vendor/Symfony/Core/Request.php</td></tr></tbody></table><h2 id="7-PSR-0-å’Œ-PSR-4"><a href="#7-PSR-0-å’Œ-PSR-4" class="headerlink" title="7. PSR-0 å’Œ PSR-4"></a>7. PSR-0 å’Œ PSR-4</h2><p><a href="https://segmentfault.com/a/1190000002616752" target="_blank" rel="noopener">PSR-0 å’Œ PSR-4 çš„åŒºåˆ«</a></p><p>1.åœ¨composerä¸­å®šä¹‰çš„NSï¼Œpsr4å¿…é¡»ä»¥\ç»“å°¾å¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œpsr0åˆ™ä¸è¦æ±‚</p><p>2.psr0é‡Œé¢æœ€åä¸€ä¸ª\ä¹‹åçš„ç±»åä¸­ï¼Œå¦‚æœæœ‰ä¸‹åˆ’çº¿ï¼Œåˆ™ä¼šè½¬æ¢æˆè·¯å¾„åˆ†éš”ç¬¦ï¼Œå¦‚Name_Space_Testä¼šè½¬æ¢æˆName\Space\Test.phpã€‚åœ¨psr4ä¸­ä¸‹åˆ’çº¿ä¸å­˜åœ¨å®é™…æ„ä¹‰</p><p>3.psr0æœ‰æ›´æ·±çš„ç›®å½•ç»“æ„ï¼Œæ¯”å¦‚å®šä¹‰äº†NSä¸º <code>Foo\Bar =&gt; vendor\foo\bar\src</code>ï¼Œ<br><code>use Foo\Bar\Tool\Request</code>è°ƒç”¨NSã€‚<br>å¦‚æœä»¥psr0æ–¹å¼åŠ è½½ï¼Œå®é™…çš„ç›®å½•ä¸º<code>vendor\foo\bar\src\Foo\Bar\Tool\Request.php</code><br>å¦‚æœä»¥psr4æ–¹å¼åŠ è½½ï¼Œå®é™…ç›®å½•ä¸º<code>vendor\foo\bar\src\Tool\Request.php</code></p><h2 id="8-æ•ˆç‡"><a href="#8-æ•ˆç‡" class="headerlink" title="8. æ•ˆç‡"></a>8. æ•ˆç‡</h2><p>PSR-0å’ŒPSR-4çš„è¿è¡Œæ•ˆç‡æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯éƒ½ä¸å¦‚classmapçš„è¿è¡Œæ•ˆç‡ï¼Œå› ä¸ºComposerä¸­ï¼Œclassmapæ˜¯åœ¨arrayä¸­ç›´æ¥æŸ¥æ‰¾çš„ï¼Œè€ŒPSR-0å’ŒPSR-4éƒ½éœ€è¦è¿­ä»£ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬éƒ½ä½¿ç”¨classmapï¼Ÿï¼Œè¿™ä¹Ÿä¸å¯¹ï¼Œå› ä¸ºclassmapåªæ˜¯å¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¯¹äºå…¶å­æ–‡ä»¶å¤¹æ˜¯æ— åŠ›çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘æ—¶ä½¿ç”¨PSR-4ï¼Œåœ¨å‘å¸ƒæ­£å¼ç‰ˆæ—¶ä½¿ç”¨classmapã€‚</p><p>composerä¸­è½¬æ¢classmapçš„æŒ‡ä»¤</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer dump-autoload -o</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´&quot;&gt;&lt;a href=&quot;#1-ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´&quot; class=&quot;headerlink&quot; title=&quot;1. ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´&quot;&gt;&lt;/a&gt;1. ä¸ºä»€ä¹ˆéœ€è¦å‘½åç©ºé—´&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·ç¼–å†™çš„ä»£ç ä¸PHPå†…éƒ¨çš„ç±»/å‡½æ•°/å¸¸é‡æˆ–ç¬¬ä¸‰æ–¹ç±»
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Lumen ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="http://blog.bayue.moe/2018/09/12/lumen-life-cycle/"/>
    <id>http://blog.bayue.moe/2018/09/12/lumen-life-cycle/</id>
    <published>2018-09-12T10:15:30.184Z</published>
    <updated>2019-07-17T03:34:10.936Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…¥å£æ–‡ä»¶"><a href="#å…¥å£æ–‡ä»¶" class="headerlink" title="å…¥å£æ–‡ä»¶"></a>å…¥å£æ–‡ä»¶</h2><p>ä¸€èˆ¬åœ¨<code>public</code>ä¸‹é¢çš„<code>index.php</code>ï¼Œå½“ç„¶ä½ å¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶ï¼Œç”šè‡³ç›®å½•ã€‚</p><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹<code>index.php</code>çš„ç»“æ„</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œæ˜¯æˆ‘è‡ªå·±åŠ çš„è‡ªå®šä¹‰APP_PATH</span></span><br><span class="line">define(<span class="string">'APP_PATH'</span>, dirname(<span class="keyword">__DIR__</span>));</span><br><span class="line"></span><br><span class="line">$app = <span class="keyword">require</span> APP_PATH . <span class="string">'/bootstrap/app.php'</span>; <span class="comment">// åˆ›å»ºå®ä¾‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$app-&gt;run(); <span class="comment">// è¯·æ±‚å¹¶å“åº”</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»º-Lumen-å®ä¾‹"><a href="#åˆ›å»º-Lumen-å®ä¾‹" class="headerlink" title="åˆ›å»º Lumen å®ä¾‹"></a>åˆ›å»º Lumen å®ä¾‹</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$app = <span class="keyword">new</span> Laravel\Lumen\Application(</span><br><span class="line">    realpath(<span class="keyword">__DIR__</span> . <span class="string">'/../'</span>) <span class="comment">// è¿™è¾¹å¦‚æœä½ æ”¹å˜äº†å…¥å£æ–‡ä»¶çš„ç›®å½•ï¼Œéœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Application åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($basePath = null)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">empty</span>(env(<span class="string">'APP_TIMEZONE'</span>))) &#123;</span><br><span class="line">        date_default_timezone_set(env(<span class="string">'APP_TIMEZONE'</span>, <span class="string">'UTC'</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;basePath = $basePath;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼•å¯¼å®¹å™¨ï¼Œæ³¨å†ŒåŸºç¡€æœåŠ¡æä¾›è€…</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;bootstrapContainer();</span><br><span class="line">    <span class="comment">// é‡å®šä¹‰å¼‚å¸¸ã€é”™è¯¯å¤„ç†</span></span><br><span class="line">    <span class="keyword">$this</span>-&gt;registerErrorHandling();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã€Œåˆ›å»º Lumen åº”ç”¨å®ä¾‹ã€è¿™ä¸ªé˜¶æ®µå®ƒåšäº†å¾ˆå¤šçš„åŸºç¡€å·¥ä½œ, é™¤äº†ä¸Šé¢æåˆ°çš„ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šåˆ›å»º APP å®¹å™¨ã€æ³¨å†Œåº”ç”¨è·¯å¾„ã€æ³¨å†ŒåŸºç¡€æœåŠ¡æä¾›è€…ã€é…ç½®ä¸­é—´ä»¶å’Œå¼•å¯¼ç¨‹åºç­‰ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯æœåŠ¡æä¾›è€…ï¼Œç®€å•æ¥è¯´å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœåŠ¡ï¼Œ<code>è®°æ—¥å¿—</code>ï¼Œåœ¨ç¨‹åºé‡Œé¢æ ‡å¿—ä¸º<code>log</code>ï¼Œé‚£ä¹ˆç»™è¿™ä¸ªæœåŠ¡æä¾›å®ç°ï¼Œä¸ºäº†è§„èŒƒè¿™ä¸ªæœåŠ¡çš„å®ç°ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ª<code>å¥‘çº¦ï¼ˆcontractï¼‰</code>ï¼Œå’Œæ¯ä¸ªæœåŠ¡æä¾›è€…è¾¾æˆ<code>å¥‘çº¦</code>ï¼Œè¿™ä¸ªæ›´æ¢æœåŠ¡æä¾›è€…ä¹Ÿä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„è¿è¡Œã€‚</p></blockquote><h2 id="è¯·æ±‚å¹¶å“åº”"><a href="#è¯·æ±‚å¹¶å“åº”" class="headerlink" title="è¯·æ±‚å¹¶å“åº”"></a>è¯·æ±‚å¹¶å“åº”</h2><p>Lumençš„è§£æè¯·æ±‚å’Œå“åº”éƒ½åœ¨å…¥å£æ–‡ä»¶ä¸­<code>$app-&gt;run()</code>é‡Œé¢è¿›è¡Œï¼Œå¤§è‡´åˆ†ä¸‹é¢4ä¸ªæ­¥éª¤ï¼š</p><ol><li>åŠ è½½å‰ç½®ä¸­é—´ä»¶</li><li>åŒ¹é…è·¯ç”±</li><li>è¿”å›æ¥å£</li><li>åŠ è½½åç½®ä¸­é—´ä»¶</li></ol><p>ä¸»è¦å®ç°ä»£ç éƒ½åœ¨<code>vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Run the application and send the response.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  SymfonyRequest|null  $request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">($request = null)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// åŠ è½½å‰ç½®è·¯ç”±å™¨ï¼Œå¤„ç†è¯·æ±‚å¹¶å“åº”</span></span><br><span class="line">    $response = <span class="keyword">$this</span>-&gt;dispatch($request);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›å“åº”</span></span><br><span class="line">    <span class="keyword">if</span> ($response <span class="keyword">instanceof</span> SymfonyResponse) &#123;</span><br><span class="line">        $response-&gt;send(); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> (string) $response;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œåç½®ä¸­é—´ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (count(<span class="keyword">$this</span>-&gt;middleware) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;callTerminableMiddleware($response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Dispatch the incoming request.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  SymfonyRequest|null  $request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Response</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span><span class="params">($request = null)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è§£æè¯·æ±‚method &amp; path</span></span><br><span class="line">    <span class="keyword">list</span>($method, $pathInfo) = <span class="keyword">$this</span>-&gt;parseIncomingRequest($request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ è½½å‰ç½®ä¸­é—´ä»¶ï¼ŒåŒ¹é…è·¯ç”±</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;sendThroughPipeline(<span class="keyword">$this</span>-&gt;middleware, <span class="function"><span class="keyword">function</span> <span class="params">()</span> <span class="title">use</span> <span class="params">($method, $pathInfo)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ç›´æ¥åŒ¹é…è·¯ç”±</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;routes[$method.$pathInfo])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handleFoundRoute([<span class="keyword">true</span>, <span class="keyword">$this</span>-&gt;routes[$method.$pathInfo][<span class="string">'action'</span>], []]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// FastRoute åŒ¹é…åŠ¨æ€è·¯ç”±</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handleDispatcherResponse(</span><br><span class="line">                <span class="keyword">$this</span>-&gt;createDispatcher()-&gt;dispatch($method, $pathInfo)</span><br><span class="line">            );</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;prepareResponse(<span class="keyword">$this</span>-&gt;sendExceptionToHandler($e));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable $e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;prepareResponse(<span class="keyword">$this</span>-&gt;sendExceptionToHandler($e));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å…¥å£æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#å…¥å£æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å…¥å£æ–‡ä»¶&quot;&gt;&lt;/a&gt;å…¥å£æ–‡ä»¶&lt;/h2&gt;&lt;p&gt;ä¸€èˆ¬åœ¨&lt;code&gt;public&lt;/code&gt;ä¸‹é¢çš„&lt;code&gt;index.php&lt;/code&gt;ï¼Œå½“ç„¶ä½ å¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶ï¼Œç”šè‡³ç›®
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PHP æ•°ç»„çš„ä½¿ç”¨æ‹¾é—</title>
    <link href="http://blog.bayue.moe/2018/08/31/php-array/"/>
    <id>http://blog.bayue.moe/2018/08/31/php-array/</id>
    <published>2018-08-31T08:27:08.093Z</published>
    <updated>2019-04-12T02:06:14.564Z</updated>
    
    <content type="html"><![CDATA[<p>æ”¶é›†äº†ä¸€äº›phpåŸå§‹æ•°ç»„å‡½æ•°çš„ä½¿ç”¨ã€æ³¨æ„äº‹é¡¹</p><h2 id="å’Œ-array-merge"><a href="#å’Œ-array-merge" class="headerlink" title="+ å’Œ array_merge"></a>+ å’Œ array_merge</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; $a = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">=&gt; [</span><br><span class="line">     <span class="number">2</span>,</span><br><span class="line">     <span class="number">3</span>,</span><br><span class="line">     <span class="number">4</span>,</span><br><span class="line">   ]</span><br><span class="line">&gt;&gt;&gt; $b = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line">=&gt; [</span><br><span class="line">     <span class="number">2</span>,</span><br><span class="line">     <span class="number">5</span>,</span><br><span class="line">     <span class="number">6</span>,</span><br><span class="line">   ]</span><br><span class="line">&gt;&gt;&gt; $a + $b;</span><br><span class="line">=&gt; [</span><br><span class="line">     <span class="number">2</span>,</span><br><span class="line">     <span class="number">3</span>,</span><br><span class="line">     <span class="number">4</span>,</span><br><span class="line">   ]</span><br><span class="line">&gt;&gt;&gt; array_merge($a, $b);</span><br><span class="line">=&gt; [</span><br><span class="line">     <span class="number">2</span>,</span><br><span class="line">     <span class="number">3</span>,</span><br><span class="line">     <span class="number">4</span>,</span><br><span class="line">     <span class="number">2</span>,</span><br><span class="line">     <span class="number">5</span>,</span><br><span class="line">     <span class="number">6</span>,</span><br><span class="line">   ]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ä¼šæ··æ·†ä¸¤ç§çš„åŒºåˆ«ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå…¶å®æœ‰å¾ˆå¤šä¸åŒï¼Œ<code>+</code>å®é™…ä¸Šæ˜¯å·¦ä¾§çš„æ•°ç»„è¿½åŠ å³è¾¹çš„æ•°ç»„ï¼Œå¦‚æœkeyä¸€æ ·ï¼Œåˆ™ä»¥å·¦è¾¹çš„ä¸ºå‡†ã€‚</p><blockquote><blockquote><p>The + operator returns the right-hand array appended to the left-hand array; for keys that exist in both arrays, the elements from the left-hand array will be used, and the matching elements from the right-hand array will be ignored.</p></blockquote></blockquote><p><code>array_merge</code> æ˜¯çœŸæ­£çš„åˆå¹¶ï¼Œå¦‚æœkeyä¸€æ ·ï¼Œä»¥æœ€åä¸€ä¸ªä¸ºå‡†ï¼ˆæ²¡æœ‰keyçš„åˆ™ç›´æ¥åˆå¹¶ï¼‰ã€‚</p><p>æ€»ç»“ï¼š</p><ul><li><code>array_merge</code> ä¼šé‡å†™ç›¸åŒçš„keyçš„å€¼ï¼Œ<code>+</code>ä¸ä¼šã€‚</li><li>å¯¹äºè‡ªç„¶æ•°åºåˆ—çš„æ•°ç»„ï¼ˆå…¶å®å°±æ˜¯ç”¨<code>array_values</code>å¤„ç†è¿‡çš„æ•°ç»„ï¼‰, <code>array_merge()</code>æ“ä½œè¿½åŠ æ“ä½œï¼Œ<code>+</code> åˆ™æ˜¯åˆå¹¶æ“ä½œã€‚</li></ul><h2 id="å‡½æ•°å¼"><a href="#å‡½æ•°å¼" class="headerlink" title="å‡½æ•°å¼"></a>å‡½æ•°å¼</h2><p>array_map<br>array_reduce<br>array_filter</p><h2 id="åˆ†å‰²-amp-amp-æ’å…¥"><a href="#åˆ†å‰²-amp-amp-æ’å…¥" class="headerlink" title="åˆ†å‰² &amp;&amp; æ’å…¥"></a>åˆ†å‰² &amp;&amp; æ’å…¥</h2><p>array_splice<br>array_splice<br>array_chunk</p><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>sort<br>ksort</p><h2 id="å…³è”æ•°ç»„"><a href="#å…³è”æ•°ç»„" class="headerlink" title="å…³è”æ•°ç»„"></a>å…³è”æ•°ç»„</h2><p>unset</p><p>array_uniqe</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ”¶é›†äº†ä¸€äº›phpåŸå§‹æ•°ç»„å‡½æ•°çš„ä½¿ç”¨ã€æ³¨æ„äº‹é¡¹&lt;/p&gt;
&lt;h2 id=&quot;å’Œ-array-merge&quot;&gt;&lt;a href=&quot;#å’Œ-array-merge&quot; class=&quot;headerlink&quot; title=&quot;+ å’Œ array_merge&quot;&gt;&lt;/a&gt;+ å’Œ array_merge
      
    
    </summary>
    
    
  </entry>
  
</feed>
